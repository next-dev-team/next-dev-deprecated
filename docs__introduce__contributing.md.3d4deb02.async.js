(self["webpackChunk_next_dev_docs"]=self["webpackChunk_next_dev_docs"]||[]).push([[158],{99298:function(){},52703:function(e,n,i){"use strict";i.r(n);i(21785);var t=i(80190),o=(i(26801),i(2006)),s=i(76985),d=i(43017),a=i(15679),c=i(74153),r=i(58138);n["default"]=({children:e,...n})=>(0,d.isBrowser)()?(0,r.jsx)(c.ZP,{height:`calc(${n.height} + 128px)`||500,offset:500,placeholder:parseInt(n.height)>300?(0,r.jsx)("div",{className:"__dumi-default-previewer",style:{padding:24,background:"rgb(245, 245, 245)"},children:(0,r.jsx)(s.ZP,{type:"descriptions"})}):(0,r.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,r.jsx)(o.Z,{size:"large"})}),once:!0,children:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)(t.Z,{type:"primary",children:"Toolbox"}),(0,r.jsx)(a.Z,{...n,children:(0,r.jsx)("div",{style:{minHeight:n.height},children:e})})]})}):null},42299:function(e,n,i){"use strict";i.r(n);var t=i(96832),o=i(3774),s=(i(52703),i(90127)),d=i(58138);const a=t.memo((({demos:e})=>(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"markdown",children:[(0,d.jsxs)("h1",{id:"participate-in-contribution",children:[(0,d.jsx)(o.AnchorLink,{to:"#participate-in-contribution","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Participate in contribution"]}),(0,d.jsx)("p",{children:"\u2764\ufe0f Loving Umi and want to get involved? Thanks!"}),(0,d.jsxs)("h2",{id:"environment-preparation",children:[(0,d.jsx)(o.AnchorLink,{to:"#environment-preparation","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Environment preparation"]}),(0,d.jsxs)("h3",{id:"nodejs-and-pnpm",children:[(0,d.jsx)(o.AnchorLink,{to:"#nodejs-and-pnpm","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Node.js and pnpm"]}),(0,d.jsxs)("p",{children:["Developing Umi requires Node.js 16+ and ",(0,d.jsx)("code",{children:"pnpm"})," v7."]}),(0,d.jsxs)("p",{children:["It is recommended to use ",(0,d.jsx)(o.Link,{to:"https://github.com/nvm-sh/nvm",children:(0,d.jsx)("code",{children:"nvm"})})," to manage Node.js to avoid permission problems and to switch the currently used version of Node.js at any time. Developers on Windows can use ",(0,d.jsx)(o.Link,{to:"https://github.com/coreybutler/nvm-windows",children:(0,d.jsx)("code",{children:"nvm-windows"})}),"."]}),(0,d.jsxs)("p",{children:["Choose a method to install on the [official website] (",(0,d.jsx)(o.Link,{to:"https://pnpm.io/installation",children:"https://pnpm.io/installation"}),") of ",(0,d.jsx)("code",{children:"pnpm"}),"."]}),(0,d.jsxs)("h3",{id:"clone-project",children:[(0,d.jsx)(o.AnchorLink,{to:"#clone-project","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Clone project"]}),(0,d.jsx)(s.Z,{code:"$ git clone git@github.com:umijs/umi.git\n$ cd umi",lang:"bash"}),(0,d.jsxs)("h3",{id:"install-dependencies-and-build",children:[(0,d.jsx)(o.AnchorLink,{to:"#install-dependencies-and-build","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Install dependencies and build"]}),(0,d.jsx)(s.Z,{code:"$ pnpm i && pnpm build",lang:"bash"}),(0,d.jsxs)("h2",{id:"develop-umi",children:[(0,d.jsx)(o.AnchorLink,{to:"#develop-umi","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Develop Umi"]}),(0,d.jsxs)("h3",{id:"start-dev-command",children:[(0,d.jsx)(o.AnchorLink,{to:"#start-dev-command","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"start dev command"]}),(0,d.jsxs)("p",{children:["A must-open command for local development Umi, used to compile TypeScript files under ",(0,d.jsx)("code",{children:"src"})," to the ",(0,d.jsx)("code",{children:"dist"})," directory, monitor file changes, and incrementally compile when there are changes."]}),(0,d.jsx)(s.Z,{code:"$ pnpm dev",lang:"bash"}),(0,d.jsxs)("p",{children:["If you think it is slow, you can also just run the ",(0,d.jsx)("code",{children:"pnpm dev"})," command of a specific package, eg."]}),(0,d.jsx)(s.Z,{code:"$ cd packages/umi\n$ pnpm dev",lang:"bash"}),(0,d.jsxs)("h3",{id:"run-example",children:[(0,d.jsx)(o.AnchorLink,{to:"#run-example","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Run Example"]}),(0,d.jsxs)("p",{children:["The ",(0,d.jsx)("code",{children:"examples"})," directory saves various examples for testing. Running example is a common way to confirm the normal function when developing Umi. Each example is equipped with a dev script, so enter the example and execute ",(0,d.jsx)("code",{children:"pnpm dev"}),"."]}),(0,d.jsx)(s.Z,{code:"$ cd examples/boilerplate\n$ pnpm dev",lang:"bash"}),(0,d.jsxs)("p",{children:["If you want to run in vite mode, add the ",(0,d.jsx)("code",{children:"--vite"})," parameter,"]}),(0,d.jsx)(s.Z,{code:"$ pnpm dev -- --vite",lang:"bash"}),(0,d.jsxs)("h3",{id:"test",children:[(0,d.jsx)(o.AnchorLink,{to:"#test","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"test"]}),(0,d.jsx)("p",{children:"At present, running the test is very fast, and 10s+ is completed. It is recommended to run locally and then mention PR to reduce Round Trip."}),(0,d.jsx)(s.Z,{code:"$ pnpm test\n...\nTest Suites: 1 skipped, 43 passed, 43 of 44 total\nTests: 6 skipped, 167 passed, 173 total\nSnapshots: 0 total\nTime: 13.658 s\nRan all test suites.",lang:"bash"}),(0,d.jsxs)("p",{children:["Use ",(0,d.jsx)("code",{children:"pnpm jest"})," if you need to run some files only, because ",(0,d.jsx)("code",{children:"pnpm test"})," only has turborepo enabled."]}),(0,d.jsx)("p",{children:"for example,"}),(0,d.jsx)(s.Z,{code:"$ pnpm jest-packages/plugin-docs/src/compiler.test.ts",lang:"bash"}),(0,d.jsxs)("h2",{id:"contribute-to-umi-documentation",children:[(0,d.jsx)(o.AnchorLink,{to:"#contribute-to-umi-documentation","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Contribute to Umi documentation"]}),(0,d.jsxs)("p",{children:["Umi's documentation is implemented by Umi@4 and the ",(0,d.jsx)("code",{children:"@umijs/plugin-docs"})," plugin, which is essentially a Umi project. Execute the following command in the root directory to start the development of Umi documentation:"]}),(0,d.jsx)(s.Z,{code:"# Install Umi documentation dependencies\n$ pnpm doc:deps\n# Enable Umi document development\n# Compilation takes a long time at the first startup, please wait patiently\n$ pnpm doc:dev",lang:"bash"}),(0,d.jsxs)("p",{children:["Open the specified port number to view the content of document updates and the results of ",(0,d.jsx)("code",{children:"@umijs/plugin-docs"})," plugin development in real time."]}),(0,d.jsxs)("h3",{id:"writing-umi-documentation",children:[(0,d.jsx)(o.AnchorLink,{to:"#writing-umi-documentation","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Writing Umi Documentation"]}),(0,d.jsx)("p",{children:"Umi documentation is written in the MDX format. MDX is an extension to the Markdown format that allows you to insert JSX components when writing Umi documents."}),(0,d.jsxs)("p",{children:["The code highlighting of Umi documentation is based on ",(0,d.jsx)(o.Link,{to:"https://github.com/atomiks/rehype-pretty-code",children:(0,d.jsx)("code",{children:"Rehype Pretty Code"})}),", please move to its [official documentation](https: //rehype-pretty-code.netlify.app)."]}),(0,d.jsx)("p",{children:"Execute the following command in the root directory to format the existing Umi documents in the repository:"}),(0,d.jsx)(s.Z,{code:"$ pnpm format:docs",lang:"bash"}),(0,d.jsxs)("p",{children:["After formatting the document, it is recommended to ",(0,d.jsx)("strong",{children:"only submit Umi documents"})," that you have written or modified. There are certain differences in the writing styles of different document contributors, and the original expected style may not be retained after formatting."]}),(0,d.jsxs)("h3",{id:"participate-in-umi-documentation-plugin-development",children:[(0,d.jsx)(o.AnchorLink,{to:"#participate-in-umi-documentation-plugin-development","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"Participate in Umi documentation plugin development"]}),(0,d.jsx)("p",{children:"Create a new terminal and execute the following command:"}),(0,d.jsx)(s.Z,{code:"$ cd packages/plugin-docs\n$ pnpm dev:css",lang:"bash"}),(0,d.jsxs)("p",{children:["The ",(0,d.jsx)("code",{children:"tailwind.out.css"})," stylesheet file is now automatically compiled and generated when you modify the ",(0,d.jsx)("code",{children:"tailwind.css"})," file or modify the TailwindCSS style classes during development."]}),(0,d.jsxs)("p",{children:["Umi will listen for changes to files in the ",(0,d.jsx)("code",{children:"docs"})," and ",(0,d.jsx)("code",{children:"packages/plugin-docs/client"})," directories, but not in the ",(0,d.jsx)("code",{children:"packages/plugin-docs/src"})," directory."]}),(0,d.jsx)("p",{children:"Execute the following command in the root directory to format the code of the Umi documentation plugin:"}),(0,d.jsx)(s.Z,{code:"$ pnpm format:plugin-docs",lang:"bash"}),(0,d.jsx)("p",{children:"Execute the following command in the root directory to build the Umi document:"}),(0,d.jsx)(s.Z,{code:"$ pnpm doc:build",lang:"bash"}),(0,d.jsxs)("h2",{id:"add-package",children:[(0,d.jsx)(o.AnchorLink,{to:"#add-package","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"add package"]}),(0,d.jsxs)("p",{children:["The new package has a packaging script, no need to manually copy files such as ",(0,d.jsx)("code",{children:"package.json"}),":"]}),(0,d.jsx)(s.Z,{code:"# create package directory\n$ mkdir packages/foo\n# Initialize package development\n$ pnpm bootstrap",lang:"bash"}),(0,d.jsxs)("h2",{id:"update-dependencies",children:[(0,d.jsx)(o.AnchorLink,{to:"#update-dependencies","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"update dependencies"]}),(0,d.jsx)("blockquote",{children:(0,d.jsx)("p",{children:"It is not recommended for non-Core Maintainers to do a lot of dependency updates. Because it involves pre-packaged dependencies, there are more points to pay attention to."})}),(0,d.jsxs)("p",{children:["Execute ",(0,d.jsx)("code",{children:"pnpm dep:update"})," to update dependencies."]}),(0,d.jsx)(s.Z,{code:"$ pnpm dep:update",lang:"bash"}),(0,d.jsxs)("p",{children:["Since Umi has prepackaged for dependencies, after updating dependencies, it is necessary to check whether the updated dependencies are devDependencies and have prepackaged dependencies for them. If so, you need to execute ",(0,d.jsx)("code",{children:"pnpm build:deps"})," under the corresponding package and specify the dependencies to update the prepackaged dependency files."]}),(0,d.jsx)(s.Z,{code:"$ pnpm build:deps --dep webpack-manifest-plugin",lang:"bash"}),(0,d.jsxs)("h2",{id:"publish",children:[(0,d.jsx)(o.AnchorLink,{to:"#publish","aria-hidden":"true",tabIndex:-1,children:(0,d.jsx)("span",{className:"icon icon-link"})}),"publish"]}),(0,d.jsx)("p",{children:"Only the Core Maintainer can perform the release."}),(0,d.jsx)(s.Z,{code:"$ pnpm release",lang:"bash"})]})})));n["default"]=e=>{const n=t.useContext(o.context),i=n.demos;return t.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&o.AnchorLink.scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),(0,d.jsx)(a,{demos:i})}},90127:function(e,n,i){"use strict";var t=i(96832),o=i(78210),s=i(3774);i(99298);function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e},d.apply(this,arguments)}function a(e,n){return h(e)||p(e,n)||r(e,n)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,n){if(e){if("string"===typeof e)return l(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,n):void 0}}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var i=0,t=new Array(n);i<n;i++)t[i]=e[i];return t}function p(e,n){var i=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var t,o,s=[],d=!0,a=!1;try{for(i=i.call(e);!(d=(t=i.next()).done);d=!0)if(s.push(t.value),n&&s.length===n)break}catch(c){a=!0,o=c}finally{try{d||null==i["return"]||i["return"]()}finally{if(a)throw o}}return s}}function h(e){if(Array.isArray(e))return e}var m={acss:"css",axml:"xml"};n["Z"]=function(e){var n=e.code,i=e.lang,c=e.showCopy,r=void 0===c||c,l=(0,s.useCopy)(),p=a(l,2),h=p[0],u=p[1];return t.createElement("div",{className:"__dumi-default-code-block"},t.createElement(o.ZP,d({},o.lG,{code:n,language:m[i]||i,theme:void 0}),(function(e){var i=e.className,o=e.style,s=e.tokens,d=e.getLineProps,a=e.getTokenProps;return t.createElement("pre",{className:i,style:o},r&&t.createElement("button",{className:"__dumi-default-icon __dumi-default-code-block-copy-btn","data-status":u,onClick:function(){return h(n)}}),s.map((function(e,n){return t.createElement("div",d({line:e,key:n}),e.map((function(e,n){return t.createElement("span",a({token:e,key:n}))})))})))})))}}}]);